# Roguelike Puzzle Dungeon - 프로덕션 디자인 문서

> game_id: game_0005
> repo: mg-game-0005
> title_kr: 로그라이크 퍼즐 던전
> title_en: Roguelike Puzzle Dungeon
> genre_tags: puzzle, roguelike, turnbased
> doc_type: production_design
> source_of_truth: docs/design/gdd_game_0005.json
> last_updated: 2025-12-19

---

## 1. 재미 요소 (Fun Factors)

### 1.1 핵심 재미 (Core Fun)
| 요소 | 설명 | 강도 |
|------|------|------|
| **전략적 결정** | 매 턴 퍼즐을 통한 중요한 선택 | ★★★★★ |
| **빌드 구성** | 런마다 다른 스킬/아이템 조합 | ★★★★★ |
| **리스크 관리** | 위험과 보상 사이의 긴장감 | ★★★★☆ |
| **재도전 욕구** | 실패해도 다시 도전하게 만드는 구조 | ★★★★☆ |

### 1.2 만족감 요소 (Satisfaction)
- **퍼즐 해결**: 어려운 퍼즐을 풀었을 때의 성취감
- **시너지 발견**: 아이템/스킬 조합 시너지 발견
- **보스 격파**: 강력한 보스를 물리친 카타르시스
- **신기록 달성**: 최고 층수/점수 갱신

### 1.3 도전 요소 (Challenge)
```
도전 구조:
├── 랜덤 던전 생성 (매번 다른 경험)
├── 영구 죽음 (Permadeath)
├── 제한된 자원 관리
├── 다양한 적 타입과 패턴
└── 히든 보스/비밀 룸
```

### 1.4 사회적 요소 (Social)
- **일일 챌린지**: 같은 시드로 경쟁
- **리더보드**: 최고 층수/점수 랭킹
- **런 공유**: 시드 코드 공유
- **도전과제 비교**: 친구와 업적 비교

---

## 2. 게임 루프 (Game Loop)

### 2.1 코어 루프 (30초~1분) - 한 턴
```
┌─────────────────────────────────────────────────┐
│                    코어 루프                      │
├─────────────────────────────────────────────────┤
│  [상황 파악] → [퍼즐 해결] → [행동 실행]          │
│       ↑                            ↓             │
│       └──── [결과 확인] ← [적 반응] ←┘           │
└─────────────────────────────────────────────────┘
```

**단계별 상세:**
1. **상황 파악** (5초): 현재 HP, 적 상태, 퍼즐 보드 확인
2. **퍼즐 해결** (15~40초): 최적의 퍼즐 해결 방법 결정
3. **행동 실행** (3초): 공격/방어/스킬 사용
4. **적 반응** (3초): 적의 반격 또는 행동
5. **결과 확인** (2초): 전투 상황 업데이트

### 2.2 세션 루프 (10~20분) - 한 런
```
[런 시작] → [층 탐험] → [방 선택] → [퍼즐 전투/이벤트] → [보상 획득]
                                                              ↓
                                              [다음 층] or [런 종료]
```

**세션 구성:**
- 런 시작/캐릭터 선택: 30초
- 층당 플레이: 3~5분
- 평균 런 3~5층: 10~20분
- 런 종료/결과: 30초

### 2.3 메타 루프 (장기)
```
┌──────────────────────────────────────────────────────┐
│                     메타 진행                         │
├──────────────────────────────────────────────────────┤
│  [런 완료] → [영혼석 획득] → [메타 업그레이드]         │
│         ↓                              ↓             │
│  [새 캐릭터 해금]                 [영구 능력 강화]     │
│         ↓                              ↓             │
│  [더 높은 층수 도전] ←────────────────┘              │
└──────────────────────────────────────────────────────┘
```

### 2.4 플로우 다이어그램
```
[앱 시작]
    ↓
[메인 메뉴] ─────→ [캐릭터 선택]
    │              [메타 업그레이드]
    │              [도전과제]
    │              [설정]
    ↓
[던전 입장]
    ↓
[층 탐색] → [방 선택] → [퍼즐 전투]
    ↑           │              ↓
    │           ├──→ [상점]
    │           ├──→ [휴식]
    │           └──→ [이벤트]
    │                    ↓
    └────────── [다음 층] or [사망/클리어]
                              ↓
                        [결과 화면]
```

---

## 3. BM 모델 (Business Model)

### 3.1 수익화 전략
| 채널 | 비중 | 설명 |
|------|------|------|
| **리워드 광고** | 40% | 부활, 보물 2배, 추가 선택지 |
| **캐릭터 팩** | 25% | 신규 플레이어블 캐릭터 |
| **편의 기능** | 15% | 영구 업그레이드 가속 |
| **일회성 구매** | 15% | 광고 제거, 스타터 팩 |
| **코스메틱** | 5% | 캐릭터 스킨 |

### 3.2 과금 포인트
```
비과금 유저 경험:
├── 모든 층 클리어 가능
├── 기본 캐릭터 2종 제공
├── 메타 진행 완전 가능 (느림)
└── 광고 부활 1회/런

과금 유저 혜택:
├── 광고 제거 ($4.99)
├── 캐릭터 팩 ($2.99~$4.99)
├── 스타터 팩 ($6.99) - 영혼석 대량 + 캐릭터
├── 영혼석 패키지 ($0.99~$19.99)
└── 올인원 팩 ($14.99) - 모든 캐릭터 해금
```

### 3.3 가격 정책
| 상품 | 가격 | 가치 |
|------|------|------|
| 소량 영혼석 (100) | $0.99 | 메타 업그레이드 1회 |
| 중량 영혼석 (500) | $3.99 | 20% 보너스 |
| 대량 영혼석 (1200) | $7.99 | 40% 보너스 |
| 광고 제거 | $4.99 | 영구 적용 |
| 캐릭터 팩 | $2.99~4.99 | 개별 캐릭터 |
| 올인원 팩 | $14.99 | 모든 캐릭터 + 영혼석 500 |

### 3.4 리텐션 메커니즘
- **일일 도전**: 매일 다른 시드의 특별 던전
- **일일 보상**: 로그인 보너스 영혼석
- **주간 챌린지**: 특수 조건 클리어
- **시즌 리더보드**: 시즌별 순위 경쟁

---

## 4. 레벨 디자인 (Level Design)

### 4.1 난이도 곡선
```
난이도
  ▲
  │                         ╭── 보스층
  │                    ╭────╯
  │               ╭────╯
  │          ╭────╯    <- 엘리트층
  │     ╭────╯
  │╭────╯
  └──────────────────────────────────────→ 층수
    1   3   5   7   9   11  13  15
              엘리트    보스
```

**난이도 공식:**
```
적_체력 = 기본_체력 × (1 + 층수 × 0.25)
적_공격력 = 기본_공격력 × (1 + 층수 × 0.2)
퍼즐_복잡도 = 기본 + floor(층수 / 3)
```

### 4.2 콘텐츠 진행
| 층 | 특징 | 새로운 요소 |
|----|------|-------------|
| 1-3 | 튜토리얼 | 기본 퍼즐, 일반 적 |
| 4-6 | 성장기 | 상점, 특수 방, 엘리트 |
| 7-9 | 중반 | 복합 퍼즐, 이벤트 방 |
| 10 | 중간 보스 | 첫 보스 전투 |
| 11-14 | 고난이도 | 강화 적, 저주 방 |
| 15 | 최종 보스 | 최종 보스 전투 |
| 16+ | 무한 | 무한 던전 모드 |

### 4.3 밸런싱 공식
```dart
// 플레이어 데미지 계산
int calculateDamage(Player player, int puzzleScore) {
  int base = player.attack;
  double puzzleMultiplier = 1 + (puzzleScore / 100) * 0.5;
  double skillBonus = player.activeSkill?.damageBonus ?? 0;
  return (base * puzzleMultiplier * (1 + skillBonus)).toInt();
}

// 영혼석 보상
int soulStoneReward(int floorReached, bool bossKilled) {
  int base = floorReached * 10;
  int bossBonus = bossKilled ? 50 : 0;
  return base + bossBonus;
}

// 메타 업그레이드 비용
int upgradeCost(int currentLevel) {
  return 50 * pow(1.5, currentLevel).toInt();
}
```

### 4.4 보상 체계
| 보상 유형 | 획득 조건 | 수량 |
|-----------|----------|------|
| 골드 (런 내) | 전투 승리 | 10~50/적 |
| 영혼석 | 런 종료 | 층수×10 |
| 아이템 | 방 클리어 | 확률 드롭 |
| 캐릭터 해금 | 특정 업적 | 영구 해금 |
| 일일 보상 | 로그인 | 20~100 영혼석 |

---

## 5. UI/UX 설계

### 5.1 정보 계층
```
레벨 1 (항상 표시):
├── 현재 HP/최대 HP
├── 층수
├── 보유 골드
└── 미니맵

레벨 2 (상호작용 시):
├── 퍼즐 보드
├── 스킬 목록
├── 아이템 인벤토리
└── 적 정보

레벨 3 (팝업):
├── 아이템 획득
├── 레벨업 선택
├── 결과 화면
└── 설정 메뉴
```

### 5.2 네비게이션 흐름
```
[메인 메뉴]
    ├── [플레이] → [캐릭터 선택] → [던전]
    ├── [메타 업그레이드] → [업그레이드 목록]
    ├── [도전과제] → [업적 목록]
    ├── [일일 도전] → [특별 던전]
    ├── [리더보드] → [랭킹]
    └── [설정] → [옵션]
```

### 5.3 피드백 시스템
| 이벤트 | 시각 | 청각 | 촉각 |
|--------|------|------|------|
| 퍼즐 완료 | 해결 이펙트 | 성공음 | 진동 (약) |
| 공격 | 타격 이펙트 | 타격음 | 진동 (중) |
| 피격 | 화면 흔들림 | 피격음 | 진동 (강) |
| 레벨업 | 레벨업 연출 | 팡파레 | 진동 (중) |
| 사망 | 화면 어두워짐 | 사망음 | 진동 (강) |

### 5.4 접근성
- **턴제 특성**: 시간 제한 없음 (기본)
- **힌트 시스템**: 퍼즐 힌트 옵션
- **색맹 모드**: 퍼즐 블록 모양 추가
- **폰트 크기**: 3단계 조절
- **효과 감소**: 화면 흔들림 끄기

---

## 6. 프로덕션 체크리스트

### 핵심 기능
- [ ] 퍼즐 전투 시스템
- [ ] 던전 생성 알고리즘
- [ ] 아이템/스킬 시스템
- [ ] 영구 죽음 (Permadeath)
- [ ] 메타 진행

### 콘텐츠
- [ ] 15+ 층 (기본)
- [ ] 50+ 아이템
- [ ] 30+ 스킬
- [ ] 5+ 캐릭터
- [ ] 10+ 적 타입
- [ ] 3+ 보스

### 메타 시스템
- [ ] 영혼석 시스템
- [ ] 메타 업그레이드
- [ ] 캐릭터 해금
- [ ] 도전과제
- [ ] 일일 도전

### 수익화
- [ ] 광고 SDK
- [ ] IAP 상품
- [ ] 상점 UI
- [ ] 부활 시스템

### QA/최적화
- [ ] 밸런싱 테스트
- [ ] 랜덤 시드 검증
- [ ] 성능 최적화
- [ ] 크래시 리포팅

### 출시 준비
- [ ] 스토어 에셋
- [ ] 앱 설명
- [ ] 법적 문서
- [ ] 소프트 런칭

---

## 7. KPI 목표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| D1 리텐션 | 38% | Firebase Analytics |
| D7 리텐션 | 15% | Firebase Analytics |
| D30 리텐션 | 6% | Firebase Analytics |
| 세션 길이 | 12분 | 평균 세션 시간 |
| 일일 세션 | 3회 | DAU / 세션 수 |
| 평균 런 시간 | 15분 | 런당 평균 시간 |
| ARPU | $0.10~0.15 | 총 매출 / DAU |
| 광고 시청률 | 45~55% | 광고 노출 / DAU |
| 결제 전환율 | 3~4% | 결제 유저 / DAU |

---

*마지막 업데이트: 2025-12-19*
